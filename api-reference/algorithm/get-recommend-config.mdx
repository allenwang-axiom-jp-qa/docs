---
title: '获取推荐配置'
api: 'GET /api/v1/site-svc-video-mgmt/recommend/config'
description: '获取推荐算法配置，包括用户行为权重和热度召回权重'
---

## 接口概述

获取推荐算法的两套权重配置：

| 权重类型 | 字段名 | 用途 |
|---------|--------|------|
| 用户行为权重 | `userBehaviorWeights` | 计算用户对视频的兴趣得分 |
| 热度召回权重 | `hotWeights` | 计算视频的热度分数（总和 = 1.0） |

## 认证

<ParamField header="x-Token" type="string" required>
  JWT 认证令牌
</ParamField>

## Response

<ResponseField name="code" type="int" required>
  业务状态码（0表示成功）
</ResponseField>

<ResponseField name="data" type="object" required>
  推荐配置数据

  <Expandable title="data properties">
    <ResponseField name="userBehaviorWeights" type="object">
      用户行为权重配置（支持小数）

      <Expandable title="properties">
        <ResponseField name="view_valid" type="number">
          有效观看得分（观看超过30秒），默认值: 1
        </ResponseField>
        <ResponseField name="view_complete" type="number">
          完播得分，默认值: 3
        </ResponseField>
        <ResponseField name="like" type="number">
          点赞得分，默认值: 5
        </ResponseField>
        <ResponseField name="favorite" type="number">
          收藏得分，默认值: 8
        </ResponseField>
        <ResponseField name="share" type="number">
          分享得分，默认值: 10
        </ResponseField>
        <ResponseField name="pay" type="number">
          付款得分，默认值: 20
        </ResponseField>
      </Expandable>
    </ResponseField>

    <ResponseField name="hotWeights" type="object">
      热度召回权重配置

      <Expandable title="properties">
        <ResponseField name="like" type="number">
          点赞权重，默认值: 0.5
        </ResponseField>
        <ResponseField name="share" type="number">
          分享权重，默认值: 0.3
        </ResponseField>
        <ResponseField name="favorite" type="number">
          收藏权重，默认值: 0.2
        </ResponseField>
      </Expandable>
    </ResponseField>

    <ResponseField name="hotWeightsSumValid" type="boolean" required>
      热度权重总和是否有效（是否等于1.0）
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="msg" type="string" required>
  响应消息
</ResponseField>

<ResponseExample>

```json Response
{
  "code": 0,
  "data": {
    "userBehaviorWeights": {
      "view_valid": 1,
      "view_complete": 3,
      "like": 5,
      "favorite": 8,
      "share": 10,
      "pay": 20
    },
    "hotWeights": {
      "like": 0.5,
      "share": 0.3,
      "favorite": 0.2
    },
    "hotWeightsSumValid": true
  },
  "msg": "获取推荐配置成功"
}
```

</ResponseExample>

## Error Codes

| 错误码 | 含义 | HTTP状态码 |
|--------|------|-----------|
| 0 | 成功 | 200 |
| TOKEN_NOT_FOUND | 未提供认证令牌 | 401 |
| TOKEN_EXPIRED | 认证令牌已过期 | 401 |
| INVALID_TOKEN | 认证令牌无效 | 401 |
| 50001 | 服务器内部错误 | 500 |

## 代码示例

<CodeGroup>

```javascript JavaScript
async function getRecommendConfig() {
  const response = await fetch('/api/v1/site-svc-video-mgmt/recommend/config', {
    headers: {
      'x-Token': 'YOUR_JWT_TOKEN'
    }
  });
  const result = await response.json();

  if (result.code === 0) {
    return result.data;
  } else {
    throw new Error(result.msg);
  }
}
```

```bash cURL
curl -H "x-Token: YOUR_JWT_TOKEN" \
  https://dev-admin.beauty-666.com/api/v1/site-svc-video-mgmt/recommend/config
```

</CodeGroup>

## 注意事项

<Note>
  配置更新后**立即生效**，无需重启服务。
</Note>

<Warning>
  当 `hotWeightsSumValid` 为 `false` 时，说明热度权重配置异常，需调用 PUT 接口修正。
</Warning>
