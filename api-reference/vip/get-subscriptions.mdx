---
title: '获取套餐列表'
api: 'GET https://dev-admin.beauty-666.com/api/v1/oms/subscriptions'
description: '获取会员套餐列表，支持按状态过滤，按排序值和创建时间排序'
---

获取会员套餐列表，可选择查询上架、下架或全部套餐。结果按 `sort_order` 升序、`created_at` 降序排列。

## 请求头

<ParamField header="Authorization" type="string" required>
  JWT Bearer token，格式：`Bearer YOUR_TOKEN`
</ParamField>

## 查询参数

<ParamField query="status" type="integer">
  状态过滤：
  - `0` - 仅下架套餐
  - `1` - 仅上架套餐
  - 不传 - 全部套餐
</ParamField>

## 响应

<ResponseField name="code" type="integer">
  响应状态码，0 表示成功
</ResponseField>

<ResponseField name="data" type="array">
  套餐列表数组

  <Expandable title="套餐对象">
    <ResponseField name="id" type="integer">
      套餐 ID
    </ResponseField>

    <ResponseField name="created_at" type="string">
      创建时间（ISO 8601 格式）
    </ResponseField>

    <ResponseField name="updated_at" type="string">
      更新时间（ISO 8601 格式）
    </ResponseField>

    <ResponseField name="name" type="string">
      套餐名称（如"月度VIP会员"）
    </ResponseField>

    <ResponseField name="duration_type" type="string">
      时长类型（如"月度会员"、"季度会员"、"年度会员"、"半年会员"）
    </ResponseField>

    <ResponseField name="duration_days" type="integer">
      时长天数（如 30、90、180、365）
    </ResponseField>

    <ResponseField name="price_cny" type="string">
      人民币价格（DECIMAL 字符串格式，如 "29.90"）
    </ResponseField>

    <ResponseField name="original_price_cny" type="string">
      人民币原价（DECIMAL 字符串格式，可为 null）
    </ResponseField>

    <ResponseField name="price_usdt" type="string">
      USDT 价格（DECIMAL 字符串格式，如 "4.50"）
    </ResponseField>

    <ResponseField name="original_price_usdt" type="string">
      USDT 原价（DECIMAL 字符串格式，可为 null）
    </ResponseField>

    <ResponseField name="benefits" type="array">
      会员权益列表（字符串数组）
    </ResponseField>

    <ResponseField name="status" type="integer">
      状态：0=下架，1=上架
    </ResponseField>

    <ResponseField name="sort_order" type="integer">
      排序值（数字越小越靠前）
    </ResponseField>

    <ResponseField name="description" type="string">
      备注说明
    </ResponseField>

    <ResponseField name="cny_discount_percent" type="integer">
      人民币折扣百分比（计算字段，仅当有原价时显示）
    </ResponseField>

    <ResponseField name="usdt_discount_percent" type="integer">
      USDT 折扣百分比（计算字段，仅当有原价时显示）
    </ResponseField>

    <ResponseField name="benefits_count" type="integer">
      权益数量（计算字段，等于 benefits 数组长度）
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="msg" type="string">
  响应消息
</ResponseField>

<RequestExample>

```bash cURL
# 获取所有上架套餐
curl "https://dev-admin.beauty-666.com/api/v1/oms/subscriptions?status=1" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

```javascript JavaScript
// 获取所有套餐
const response = await fetch(
  'https://dev-admin.beauty-666.com/api/v1/oms/subscriptions',
  {
    headers: {
      'Authorization': 'Bearer YOUR_TOKEN'
    }
  }
);
const data = await response.json();

// 处理价格（字符串转数字）
data.data.forEach(plan => {
  const priceCny = parseFloat(plan.price_cny);
  const priceUsdt = parseFloat(plan.price_usdt);
  console.log(`${plan.name}: ¥${priceCny} / ${priceUsdt} USDT`);
});
```

```python Python
import requests

# 仅获取上架套餐
response = requests.get(
    'https://dev-admin.beauty-666.com/api/v1/oms/subscriptions',
    headers={'Authorization': 'Bearer YOUR_TOKEN'},
    params={'status': 1}
)
data = response.json()
```

</RequestExample>

<ResponseExample>

```json 200 成功
{
  "code": 0,
  "data": [
    {
      "id": 1,
      "created_at": "2026-01-06T10:30:00Z",
      "updated_at": "2026-01-06T10:30:00Z",
      "name": "月度VIP会员",
      "duration_type": "月度会员",
      "duration_days": 30,
      "price_cny": "29.90",
      "original_price_cny": "39.90",
      "price_usdt": "4.50",
      "original_price_usdt": "6.00",
      "benefits": [
        "全站视频免费看",
        "高清画质观看",
        "去除广告",
        "专属会员标识"
      ],
      "status": 1,
      "sort_order": 1,
      "description": "性价比之选",
      "cny_discount_percent": 74,
      "usdt_discount_percent": 75,
      "benefits_count": 4
    }
  ],
  "msg": "获取套餐列表成功"
}
```

</ResponseExample>

<Warning>
  **价格字段格式说明：**
  - 所有价格字段在 JSON 中为**字符串类型**（如 `"29.90"`）
  - 前端接收后需要使用 `parseFloat()` 转换为数字进行计算
  - 数据库使用 DECIMAL(19,2) 存储以保证精度
</Warning>

## 排序规则

列表默认按以下规则排序：
1. **sort_order** 升序（数字越小越靠前）
2. **created_at** 降序（相同排序值时，新创建的靠前）
